"use strict";!function(t){function e(){var e=t(".adress");0<e.length&&(t(document).on("click",".adress",function(){t(this).toggleClass("is-open"),t(".adress__list").slideToggle(300,"linear")}),e.hover(function(){},function(){t(this).removeClass("is-open"),t(".adress__list").slideUp(300,"linear")}))}function i(){var e=t(".sort-view__link");if(0<e.length){var i={0:"",1:"catalog-goriz",2:"catalog-tabl"},o="is-select",s=localStorage.getItem("vid_catalog_index");null!==s&&(t("body").addClass(i[s]),e.removeClass(o),t(e[s]).addClass(o)),t(document).on("click",".sort-view__link",function(){var s=t(this),n=s.index();e.removeClass(o),s.addClass(o),t.each(i,function(e,i){t("body").removeClass(i)}),t("body").addClass(i[n]),localStorage.setItem("vid_catalog_index",n)})}}function o(){0<t(".catalog-category").length&&t(document).on("click",".catalog-category__sub",function(){var e=t(this).parents(".catalog-category__item");e.toggleClass("is-open"),e.find(".deep-lev-1").slideToggle()})}function s(){var e=t("#filter-form-catalog");if(0<e.length){var i=!0;t(document).on("change",".filter-block__checkbox-input",function(){var o=t(this).parents(".filter-block__container"),s=0,a=[];t.each(o.find(".filter-block__checkbox-input"),function(){t(this).prop("checked")&&s++}),t.each(e.find(".filter-block__checkbox-input"),function(){t(this).prop("checked")&&a.push(t(this).next(".filter-block__checkbox-fufel").find(".filter-block__checkbox-name").text())}),s=0<s?"("+s+")":"",o.find(".filter-block__count").text(s);var r=e.attr("action")+"?";r+=e.serialize()+"&set_filter=1",i&&t.get(r,function(e){var i=t(e);t(".js-load-prod").empty().append(i.find(".catalog-product__item"));var o="<span class='fil-res'>Найдено ",s=1*i.find(".filter-block").attr("data-count");o+=s+" "+n(s,"товар","товара","товаров")+" по фильтрам:<span>",o+=" "+a.join(", "),o=0<a.length?o:"",t(".filter-itog__text").html(o)})}),t(document).on("click",".js-filter-res",function(){i=!1,t.each(e.find(".filter-block__checkbox-input"),function(){t(this).prop("checked")&&t(this).trigger("click")}),i=!0;var o=e.attr("action")+"?del_filter=1";t.get(o,function(e){var i=t(e);t(".js-load-prod").empty().append(i.find(".catalog-product__item")),t(".filter-itog__text").empty()})})}}function n(t,e,i,o){var t=Math.abs(t)%100,s=t%10;return 10<t&&20>t?o:1<s&&5>s?i:1==s?e:o}function a(){t(document).on("click",".js-sel-product",function(){var e=t(this),i=e.parents(".js-prod-item"),o=JSON.parse(e.attr("data-big-data"));i.find(".js-sel-product").removeClass("is-chek"),e.addClass("is-chek"),i.find(".js-add-basket").attr("data-link",o.basket_link),i.find(".price-show").text(new Intl.NumberFormat("ru-RU").format(o.price))}),t(document).on("click",".js-offers-toggle",function(){var e=t(this).parents(".js-prod-item");e.find(".js-offers-hid").slideToggle(),e.find(".js-variation").toggleClass("is-show")}),t(document).on("click",".js-add-basket",function(){window.location.href=atob(t(this).attr("data-link")).replace(/&amp;/gi,"&")})}function r(){t(document).on("click",".js-modal-coupon",function(){return t(".market-cart").addClass("coupon-show"),!1}),t(document).on("click",".coupon-modal__close",function(){t(".market-cart").removeClass("coupon-show")})}t(function(){e(),i(),o(),s(),a(),r()})}(jQuery);